# 要件トレーサビリティ（M1）

## 目的

`docs/REQUIREMENTS.md` の要件を、M1実装対象と検証ケースに対応付ける。

## スコープ区分

| 区分 | 定義 |
| --- | --- |
| M1-必須 | 本マイルストーンで実装・検証する |
| M1-除外（任意） | 任意要件のため本マイルストーンでは未着手 |
| M1-除外（将来） | 将来要件のため本マイルストーンでは未着手 |

## トレーサビリティ表（機能要件）

| 要件ID | 要件概要 | 区分 | 実装成果物 | 検証ケースID |
| --- | --- | --- | --- | --- |
| F-IN-01 | JaCoCo XML をパースできる | M1-必須 | XMLパーサ、データモデル | TC-UNIT-001,TC-INT-001 |
| F-IN-02 | CLI引数でレポートパス指定できる | M1-必須 | CLI引数解析 | TC-UNIT-002,TC-E2E-001 |
| F-IN-03 | POMからレポートパス自動解決できる | M1-必須 | POM解析、解決ロジック | TC-UNIT-003,TC-INT-002 |
| F-IN-04 | 未検出時に既知パスへフォールバックする | M1-必須 | 探索順制御、フォールバック | TC-UNIT-004,TC-E2E-002 |
| F-IN-05 | 複数XMLをマージできる | M1-除外（将来） | - | - |
| F-NAV-01 | 上下キー/jkでカーソル移動できる | M1-必須 | リスト操作ハンドラ | TC-UNIT-005,TC-INT-003 |
| F-NAV-02 | Enterで子ノードに入れる | M1-必須 | ドリルダウン遷移 | TC-UNIT-006,TC-INT-004 |
| F-NAV-03 | b/Backspaceで親へ戻れる | M1-必須 | 戻る遷移、履歴管理 | TC-UNIT-007,TC-INT-005 |
| F-NAV-04 | q/Ctrl+Cで終了できる | M1-必須 | 終了イベント処理 | TC-UNIT-008,TC-E2E-003 |
| F-NAV-05 | sでソート基準を切り替えられる | M1-必須 | ソート状態管理、描画更新 | TC-UNIT-009,TC-INT-006 |
| F-NAV-06 | /で名前フィルターできる | M1-除外（将来） | - | - |
| F-NAV-07 | g/Gで先頭末尾へジャンプできる | M1-除外（任意） | - | - |
| F-DSP-01 | 閾値に応じて色分け表示できる | M1-必須 | 色判定ロジック | TC-UNIT-010,TC-INT-007 |
| F-DSP-02 | カバレッジバーを表示できる | M1-必須 | バー生成・描画 | TC-UNIT-011,TC-INT-008 |
| F-DSP-03 | カウンタ種別切替ができる | M1-除外（任意） | - | - |
| F-DSP-04 | 端末幅に応じて調整できる | M1-除外（任意） | - | - |
| F-DSP-05 | --no-colorを提供する | M1-除外（任意） | - | - |

## トレーサビリティ表（非機能要件）

| 要件ID | 要件概要 | 区分 | 実装成果物 | 検証ケースID |
| --- | --- | --- | --- | --- |
| NF-01 | 起動時間1秒以内（1000クラス規模） | M1-必須 | ベンチマーク計測手順 | TC-NFR-001 |
| NF-02 | macOS/Linux対応（Windowsは将来） | M1-必須 | クロスビルド設定 | TC-NFR-002 |
| NF-03 | Go 1.22以上でビルド可能 | M1-必須 | `go.mod`、CI設定 | TC-NFR-003 |
| NF-04 | 依存パッケージを最小限化 | M1-必須 | 依存ライブラリ選定 | TC-NFR-004 |
| NF-05 | Homebrewとgo installで配布 | M1-必須 | GoReleaser、配布手順 | TC-NFR-005 |
| NF-06 | JaCoCo 0.8.x XMLに対応 | M1-必須 | パーサ互換性 | TC-NFR-006 |
| NF-07 | 単一バイナリでランタイム依存なし | M1-必須 | ビルド成果物 | TC-NFR-007 |

## 検証ケース定義（雛形）

| ケースID | 種別 | 観点 |
| --- | --- | --- |
| TC-UNIT-* | 単体 | 入力と期待値の一致、境界値、エラー分岐 |
| TC-INT-* | 結合 | パーサ/ナビゲーション/描画の結合動作 |
| TC-E2E-* | E2E | CLI起動から終了までの主要シナリオ |
| TC-NFR-* | 非機能 | 性能、対応環境、配布、互換性 |

## 受け入れ判定

- 各 M1-必須要件に少なくとも1件以上の検証ケースIDが割り当てられていること。
- M1-除外要件は `-` を明記し、未実装扱いであること。
- 実装完了時に本表の検証ケースIDと実テストを突合できること。
